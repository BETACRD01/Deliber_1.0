from usuarios.models import Perfil
from authentication.models import User
email = "williancerda0@gmail.com"
try:
    u = User.objects.get(email=email)
    print("=== USUARIO ENCONTRADO ===")
    print("ID:", u.id)
    print("Email:", u.email)
    print("Activo:", u.is_active)
    print("is_staff:", u.is_staff)
    print("is_superuser:", u.is_superuser)
    
    # Buscar rol actual en Perfil
    perfil = Perfil.objects.get(usuario=u)
    print("\n=== PERFIL ===")
    print("Rol actual:", perfil.rol)
    print("Verificado:", perfil.verificado)
    
except Exception as e:
    print("ERROR:", e)
from usuarios.models import Perfil
from authentication.models import User
email = "williancerda0@gmail.com"
try:
    u = User.objects.get(email=email)
    print("=== USUARIO ENCONTRADO ===")
    print("ID:", u.id)
    print("Email:", u.email)
    print("Activo:", u.is_active)
    print("is_staff:", u.is_staff)
    print("is_superuser:", u.is_superuser)
    perfil = Perfil.objects.get(user=u)
    print("\n=== PERFIL ===")
    print("Rol actual:", perfil.rol)
    print("Verificado:", perfil.verificado)
except Exception as e:
    print("ERROR:", e)
exit
exit()
from authentication.models import User
from administradores.models import Administrador
# Buscar el usuario
user = User.objects.filter(email='wd1501074@gmail.com').first()
if user:
    print(f"âœ… Usuario existe: {user.email}")
    print(f"   - ID: {user.id}")
    print(f"   - Rol: {user.rol}")
    print(f"   - Is Superuser: {user.is_superuser}")
    
    # Verificar si tiene perfil de Administrador
    try:
        admin = user.perfil_admin
        print(f"âœ… Ya tiene perfil Administrador (ID: {admin.id})")
    except Administrador.DoesNotExist:
        print("âŒ NO tiene perfil de Administrador")
        
        # Crear el perfil de Administrador
        admin = Administrador.objects.create(
            user=user,
            cargo='Administrador General',
            departamento='Operaciones',
            puede_gestionar_usuarios=True,
            puede_gestionar_pedidos=True,
            puede_gestionar_proveedores=True,
            puede_gestionar_repartidores=True,
            puede_gestionar_rifas=True,
            puede_ver_reportes=True,
            puede_configurar_sistema=True,
            puede_gestionar_solicitudes=True,
            activo=True,
        )
        print(f"âœ… Perfil de Administrador creado (ID: {admin.id})")
        
        # Hacer superuser si no lo es
        if not user.is_superuser:
            user.is_superuser = True
            user.is_staff = True
            user.save()
            print("âœ… Usuario convertido en superuser")
else:
    print("âŒ Usuario NO existe")
# Salir
exit()
from authentication.models import User
from administradores.models import Administrador
user = User.objects.get(email='wd1501074@gmail.com')
print(f"âœ… Usuario: {user.email}")
print(f"   - ID: {user.id}")
print(f"   - Rol: {user.rol}")
print(f"   - Is Superuser: {user.is_superuser}")
print(f"   - Is Staff: {user.is_staff}")
admin = user.perfil_admin
print(f"\nâœ… Administrador: {admin.cargo}")
print(f"   - ID: {admin.id}")
print(f"   - Puede gestionar usuarios: {admin.puede_gestionar_usuarios}")
print(f"   - Es super admin: {admin.es_super_admin}")
exit()
from authentication.models import User
from administradores.models import Administrador
# Crear User
user = User.objects.create_user(
    email='wd1501074@gmail.com',
    username='wd1501074',
    password='12345678',
    first_name='Randy',
    last_name='Aguinda',
    celular='0986665378',
    rol='ADMINISTRADOR',
    rol_activo='ADMINISTRADOR',
    is_staff=True,
    is_superuser=True,
    is_active=True,
    verificado=True,
    terminos_aceptados=True,
)
print(f"âœ… Usuario creado: {user.email} (ID: {user.id})")
# Crear perfil Administrador
admin = Administrador.objects.create(
    user=user,
    cargo='Administrador General',
    departamento='Operaciones',
    puede_gestionar_usuarios=True,
    puede_gestionar_pedidos=True,
    puede_gestionar_proveedores=True,
    puede_gestionar_repartidores=True,
    puede_gestionar_rifas=True,
    puede_ver_reportes=True,
    puede_configurar_sistema=True,
    puede_gestionar_solicitudes=True,
    activo=True,
)
print(f"âœ… Administrador creado (ID: {admin.id})")
print(f"\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
print(f"â•‘   âœ… SUPERADMINISTRADOR CREADO       â•‘")
print(f"â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print(f"\nğŸ“§ Email:     wd1501074@gmail.com")
print(f"ğŸ”’ Password:  12345678")
print(f"ğŸ’¼ Cargo:     Administrador General")
print(f"ğŸ¢ Depto:     Operaciones")
print(f"\nâœ… Accesos habilitados:")
print(f"   â€¢ Django Admin:  http://localhost:8000/admin/")
print(f"   â€¢ Panel Admin:   (tu React frontend)")
print(f"\nâš ï¸  RECUERDA: Cambiar contraseÃ±a despuÃ©s del primer login")
exit()
from authentication.models import User
from administradores.models import Administrador
# Obtener el usuario
user = User.objects.get(email='wd1501074@gmail.com')
print(f"âœ… Usuario: {user.email} (ID: {user.id})")
print(f"   - Is Superuser: {user.is_superuser}")
print(f"   - Is Staff: {user.is_staff}")
print(f"   - Rol: {user.rol}")
# Verificar si tiene perfil Administrador
try:
    admin = user.perfil_admin
    print(f"\nâœ… Perfil Administrador encontrado (ID: {admin.id})")
    print(f"   - Cargo: {admin.cargo}")
    print(f"   - Activo: {admin.activo}")
    print(f"   - Puede gestionar usuarios: {admin.puede_gestionar_usuarios}")
    print(f"   - Es super admin: {admin.es_super_admin}")
    
    # Si el perfil existe pero no tiene todos los permisos, actualizarlo
    if not admin.puede_configurar_sistema:
        print("\nâš ï¸  Actualizando permisos del administrador...")
        admin.cargo = 'Administrador General'
        admin.departamento = 'Operaciones'
        admin.puede_gestionar_usuarios = True
        admin.puede_gestionar_pedidos = True
        admin.puede_gestionar_proveedores = True
        admin.puede_gestionar_repartidores = True
        admin.puede_gestionar_rifas = True
        admin.puede_ver_reportes = True
        admin.puede_configurar_sistema = True
        admin.puede_gestionar_solicitudes = True
        admin.activo = True
        admin.save()
        print("âœ… Permisos actualizados correctamente")
    
except Administrador.DoesNotExist:
    print("\nâŒ NO tiene perfil de Administrador (esto no deberÃ­a pasar)")
print(f"\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
print(f"â•‘   âœ… SUPERADMINISTRADOR LISTO        â•‘")
print(f"â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print(f"\nğŸ“§ Email:    wd1501074@gmail.com")
print(f"ğŸ”’ Password: 12345678")
print(f"ğŸŒ Admin:    http://localhost:8000/admin/")
exit()
from authentication.models import User
from django.contrib.auth.hashers import make_password
# Eliminar el usuario si existe (para empezar limpio)
User.objects.filter(email='admin@deliber.com').delete()
# Crear nuevo usuario admin
user = User.objects.create(
    email='admin@deliber.com',
    username='admin',
    first_name='Admin',
    last_name='Sistema',
    is_superuser=True,
    is_staff=True,
    is_active=True,
)
# Establecer contraseÃ±a
user.set_password('Admin123456')
user.save()
# Verificar que se creÃ³ correctamente
user_verify = User.objects.get(email='admin@deliber.com')
print(f"âœ… Usuario creado:")
print(f"   Email: {user_verify.email}")
print(f"   Es superuser: {user_verify.is_superuser}")
print(f"   Es activo: {user_verify.is_active}")
print(f"   ContraseÃ±a verificada: {user_verify.check_password('Admin123456')}")
exit()
from authentication.models import User
from authentication.serializers import UserSerializer
user = User.objects.get(email='admin@deliber.com')
serializer = UserSerializer(user)
print("Datos del usuario:")
import json
print(json.dumps(serializer.data, indent=2, default=str))
exit()
from proveedores.models import Proveedor
print("Campos de Proveedor:")
for field in Proveedor._meta.get_fields():
    print(f"  - {field.name}")
exit()
from proveedores.models import Proveedor
print("Campos de Proveedor:")
for field in Proveedor._meta.get_fields():
    print(f"  - {field.name}")
exit()
